// src/services/apiService.ts import { API_BASE_URL, AUTH_BASE_URL, USER_AUTH_URL, STERISID_APPKEY } from '../utils/constants'; export const fetchConnectCareUser = async (email: string) => { const response = await fetch(${API_BASE_URL}/sterisid/list_sterisid_info, { method: 'POST', headers: { 'Content-Type': 'application/json', 'STERISID_APPKEY': STERISID_APPKEY, }, body: JSON.stringify({ email }), }); if (!response.ok) { throw new Error('Network response was not ok'); } const data = await response.json(); return data; }; export const fetchSterisIDToken = async () => { const response = await fetch(AUTH_BASE_URL, { method: 'POST', headers: { 'Content-Type': 'application/x-www-form-urlencoded', }, body: 'grant_type=client_credentials', }); if (!response.ok) { throw new Error('Failed to fetch SterisID Token'); } const data = await response.json(); return data.access_token; }; export const fetchUserFromSterisID = async (email: string, token: string) => { const response = await fetch(${USER_AUTH_URL}?filter=email eq ${email}, { method: 'GET', headers: { 'Authorization': Bearer ${token}, 'Content-Type': 'application/json', }, }); if (!response.ok) { throw new Error('Failed to fetch user from SterisID'); } const data = await response.json(); return data; };